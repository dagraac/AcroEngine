#include "AObject.h"
#include "AType.h"
#include "AVariable.h"


/////////////////////////////////////////////////////////////////////////////
// @ 생성.
/////////////////////////////////////////////////////////////////////////////
AcroEngine::IObject::IObject()
{
    m_ID = 0;
    m_ReferenceCount = 0;
}

/////////////////////////////////////////////////////////////////////////////
// @ 소멸.
/////////////////////////////////////////////////////////////////////////////
AcroEngine::IObject::~IObject()
{

}

/////////////////////////////////////////////////////////////////////////////
// @ 레퍼런스 카운트 증가.
/////////////////////////////////////////////////////////////////////////////
void AcroEngine::IObject::IncreaseReference(AObject Object)
{
    if (Object != nullptr && !Object->m_IsDestroyed)
    {
        ++Object->m_ReferenceCount;
    }
}

/////////////////////////////////////////////////////////////////////////////
// @ 레퍼런스 카운트 감소.
/////////////////////////////////////////////////////////////////////////////
void AcroEngine::IObject::DecreaseReference(AObject Object)
{
    if (Object != nullptr && !Object->m_IsDestroyed)
    {
        --Object->m_ReferenceCount;

        if (Object->m_ReferenceCount <= 0)
        {
            Object->m_IsDestroyed = true;
        }
    }
}

/////////////////////////////////////////////////////////////////////////////
// @
/////////////////////////////////////////////////////////////////////////////
AcroEngine::AString AcroEngine::IObject::ToString()
{
    return AString();
}

/////////////////////////////////////////////////////////////////////////////
// @ 생성.
/////////////////////////////////////////////////////////////////////////////
AcroEngine::AObject AcroEngine::IObject::Instantiate(AcroEngine::AType Class)
{
    return nullptr;
}

/////////////////////////////////////////////////////////////////////////////
// @ 파괴.
/////////////////////////////////////////////////////////////////////////////
void AcroEngine::IObject::Destroy(AcroEngine::AObject Object)
{
    if (Object != nullptr && !Object->m_IsDestroyed)
    {
        Object->m_ReferenceCount = 0;
        Object->m_IsDestroyed = true;
    }
}


/////////////////////////////////////////////////////////////////////////////
// @ 즉시 파괴.
/////////////////////////////////////////////////////////////////////////////
void AcroEngine::IObject::DestroyImmediate(AcroEngine::AObject Object)
{
    if (Object != nullptr)
    {
        delete Object;
        Object = nullptr;
    }
}

///////////////////////////////////////////////////////////////////////////////
//// @
///////////////////////////////////////////////////////////////////////////////
//AcroEngine::AType* AcroEngine::IObject::GetType()
//{
//    //AClassGenerated::GetTypeName();
//    return nullptr;
//}