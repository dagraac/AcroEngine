#include "AObject.h"
#include "AType.h"
#include "AVariable.h"


namespace AcroEngine
{
    /////////////////////////////////////////////////////////////////////////////
// @ 생성.
/////////////////////////////////////////////////////////////////////////////
    IObject::IObject()
    {
        m_ID = 0;
        m_ReferenceCount = 0;
    }

    /////////////////////////////////////////////////////////////////////////////
    // @ 소멸.
    /////////////////////////////////////////////////////////////////////////////
    IObject::~IObject()
    {

    }

    /////////////////////////////////////////////////////////////////////////////
    // @ 레퍼런스 카운트 증가.
    /////////////////////////////////////////////////////////////////////////////
    XPlatform::VOID IObject::IncreaseReference(AObject Object)
    {
        if (Object != nullptr && !Object->m_IsDestroyed)
        {
            ++Object->m_ReferenceCount;
        }
    }

    /////////////////////////////////////////////////////////////////////////////
    // @ 레퍼런스 카운트 감소.
    /////////////////////////////////////////////////////////////////////////////
    XPlatform::VOID IObject::DecreaseReference(AObject Object)
    {
        if (Object != nullptr && !Object->m_IsDestroyed)
        {
            --Object->m_ReferenceCount;

            if (Object->m_ReferenceCount <= 0)
            {
                Object->m_IsDestroyed = true;
            }
        }
    }

    /////////////////////////////////////////////////////////////////////////////
    // @
    /////////////////////////////////////////////////////////////////////////////
    AString IObject::ToString()
    {
        return AString();
    }

    /////////////////////////////////////////////////////////////////////////////
    // @
    /////////////////////////////////////////////////////////////////////////////
    XPlatform::BOOL8 IObject::Equals(AObject Object)
    {
        if (Object == nullptr)
            return false;

        return m_ID == Object->m_ID;
    }

    /////////////////////////////////////////////////////////////////////////////
    // @
    /////////////////////////////////////////////////////////////////////////////
    XPlatform::INT32 IObject::GetHashCode()
    {
        return m_ID;
    }

    ///////////////////////////////////////////////////////////////////////////////
    //// @
    ///////////////////////////////////////////////////////////////////////////////
    //AType* IObject::GetType()
    //{
    //    //AClassGenerated::GetTypeName();
    //    return nullptr;
    //}
}